<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fr"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>LanguageScreen.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Project-1</a> &gt; <a href="index.source.html" class="el_package">views</a> &gt; <span class="el_source">LanguageScreen.java</span></div><h1>LanguageScreen.java</h1><pre class="source lang-java linenums">package  views;
import dao.UserDAO;
import db.Myconnection;
import model.UserScore;
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class LanguageScreen extends JFrame implements ActionListener {
     String email;

<span class="nc" id="L17">   public  LanguageScreen(String email) {</span>
<span class="nc" id="L18">        this.email = email;</span>

<span class="nc" id="L20">        setTitle(&quot;Language Selection&quot;);</span>
<span class="nc" id="L21">        setSize(600, 400);</span>
<span class="nc" id="L22">       setLocationRelativeTo(null);</span>

<span class="nc" id="L24">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L25">        setLayout(new BorderLayout());</span>

        // Create a panel to hold the rules and language selection options
<span class="nc" id="L28">        JPanel mainPanel = new JPanel();</span>
<span class="nc" id="L29">        mainPanel.setLayout(new BorderLayout());</span>

        // Create a panel for the rules
<span class="nc" id="L32">        JTextArea rulesTextArea = new JTextArea();</span>
<span class="nc" id="L33">        rulesTextArea.setText(</span>
                &quot;######################################################################################################################################\n&quot; +
                        &quot;Rules:\n&quot; +
                        &quot;Name of the quiz should be unique\n&quot; +
                        &quot;Name should have less than 20 characters\n&quot; + // Corrected character limit
                        &quot;Name should be valuable\n&quot; +
                        &quot;######################################################################################################################################&quot;);
<span class="nc" id="L40">        rulesTextArea.setEditable(false);</span>
<span class="nc" id="L41">        mainPanel.add(rulesTextArea, BorderLayout.NORTH);</span>

        // Create a panel for language selection
<span class="nc" id="L44">        JPanel langSelectionPanel = new JPanel();</span>
<span class="nc" id="L45">        langSelectionPanel.setLayout(new GridLayout(4, 1)); // Corrected grid layout</span>

<span class="nc" id="L47">        JButton javaButton = new JButton(&quot;Java&quot;);</span>
<span class="nc" id="L48">        javaButton.addActionListener(this);</span>
<span class="nc" id="L49">        langSelectionPanel.add(javaButton);</span>

<span class="nc" id="L51">        JButton jsButton = new JButton(&quot;JavaScript&quot;);</span>
<span class="nc" id="L52">        jsButton.addActionListener(this);</span>
<span class="nc" id="L53">        langSelectionPanel.add(jsButton);</span>

<span class="nc" id="L55">        JButton webdevButton = new JButton(&quot;Web Development&quot;);</span>
<span class="nc" id="L56">        webdevButton.addActionListener(this);</span>
<span class="nc" id="L57">        langSelectionPanel.add(webdevButton);</span>

<span class="nc" id="L59">        JButton exitButton = new JButton(&quot;Exit&quot;);</span>
<span class="nc" id="L60">        exitButton.addActionListener(this);</span>
<span class="nc" id="L61">        langSelectionPanel.add(exitButton);</span>

<span class="nc" id="L63">        mainPanel.add(langSelectionPanel, BorderLayout.CENTER);</span>

<span class="nc" id="L65">        add(mainPanel, BorderLayout.CENTER);</span>
<span class="nc" id="L66">        setVisible(true);</span>
<span class="nc" id="L67">    }</span>

    @Override
    public void actionPerformed(ActionEvent e) {
<span class="nc" id="L71">       dispose();</span>
<span class="nc" id="L72">        String lang = &quot;&quot;;</span>
<span class="nc bnc" id="L73" title="All 5 branches missed.">        switch (e.getActionCommand()) {</span>
            case &quot;Java&quot;:
<span class="nc" id="L75">                lang = &quot;Java&quot;;</span>
<span class="nc" id="L76">                break;</span>
            case &quot;JavaScript&quot;:
<span class="nc" id="L78">                lang = &quot;JS&quot;;</span>
<span class="nc" id="L79">                break;</span>
            case &quot;Web Development&quot;:
<span class="nc" id="L81">                lang = &quot;Webdev&quot;;</span>
<span class="nc" id="L82">                break;</span>
            case &quot;Exit&quot;:
<span class="nc" id="L84">                System.exit(0);</span>
        }
<span class="nc bnc" id="L86" title="All 2 branches missed.">        if (!lang.isEmpty()) {</span>
<span class="nc" id="L87">            dispose();</span>
<span class="nc" id="L88">            new QuizNameScreen(lang, email);</span>
        }
<span class="nc" id="L90">    }</span>

    public static void main(String[] args) {
<span class="nc" id="L93">        new LanguageScreen(&quot;kiranjeetkour144&quot;);</span>
<span class="nc" id="L94">    }</span>
}

class Quiz extends JFrame {
    public JLabel questionLabel;
    public JRadioButton option1Button;
    public JRadioButton option2Button;
    public JRadioButton option3Button;
    public JButton nextButton;
    public ButtonGroup buttonGroup;

    public ResultSet resultSet;
    public int score;
    public Connection connection;
    public String correctAnswer;
    public String name; // Added name attribute

<span class="nc" id="L111">    public Quiz(String lang, String name,String email) {</span>
<span class="nc" id="L112">        this.name = name; // Store the name</span>
<span class="nc" id="L113">        setTitle(&quot;Quiz&quot;);</span>
<span class="nc" id="L114">        setSize(500, 300);</span>
<span class="nc" id="L115">        setLocationRelativeTo(null);</span>

<span class="nc" id="L117">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L118">        setLayout(new GridLayout(6, 1)); // Corrected grid layout</span>

        // Initialize components
<span class="nc" id="L121">        questionLabel = new JLabel();</span>
<span class="nc" id="L122">        option1Button = new JRadioButton();</span>
<span class="nc" id="L123">        option2Button = new JRadioButton();</span>
<span class="nc" id="L124">        option3Button = new JRadioButton();</span>
<span class="nc" id="L125">        nextButton = new JButton(&quot;Next&quot;);</span>

        // Add radio buttons to button group
<span class="nc" id="L128">        buttonGroup = new ButtonGroup();</span>
<span class="nc" id="L129">        buttonGroup.add(option1Button);</span>
<span class="nc" id="L130">        buttonGroup.add(option2Button);</span>
<span class="nc" id="L131">        buttonGroup.add(option3Button);</span>

        // Add components to frame
<span class="nc" id="L134">        add(new JLabel(&quot;Quiz Name: &quot; + name)); // Added quiz name label</span>
<span class="nc" id="L135">        add(questionLabel);</span>
<span class="nc" id="L136">        add(option1Button);</span>
<span class="nc" id="L137">        add(option2Button);</span>
<span class="nc" id="L138">        add(option3Button);</span>
<span class="nc" id="L139">        add(nextButton);</span>

        // Add action listener to next button
<span class="nc" id="L142">        nextButton.addActionListener(new ActionListener() {</span>
            @Override
            public void actionPerformed(ActionEvent e) {
<span class="nc" id="L145">                processAnswer();</span>
                try {
<span class="nc bnc" id="L147" title="All 2 branches missed.">                    if (resultSet.next()) {</span>
<span class="nc" id="L148">                        displayQuestion();</span>
                    } else {
<span class="nc" id="L150">                        endQuiz(email,lang);</span>
                    }
<span class="nc" id="L152">                } catch (Exception ex) {</span>
<span class="nc" id="L153">                    ex.printStackTrace();</span>
<span class="nc" id="L154">                }</span>
<span class="nc" id="L155">            }</span>
        });

        // Load questions from database
        try {
<span class="nc" id="L160">            connection = Myconnection.getConnection();</span>
<span class="nc" id="L161">            PreparedStatement ps = connection.prepareStatement(&quot;SELECT * FROM &quot; + lang);</span>
<span class="nc" id="L162">            resultSet = ps.executeQuery();</span>
<span class="nc bnc" id="L163" title="All 2 branches missed.">            if (resultSet.next()) {</span>
<span class="nc" id="L164">                displayQuestion();}</span>
<span class="nc bnc" id="L165" title="All 2 branches missed.">            else if(!resultSet.next()){</span>
<span class="nc" id="L166">                    dispose();</span>
                }
<span class="nc" id="L168">            } catch (SQLException ex) {</span>
<span class="nc" id="L169">            throw new RuntimeException(ex);</span>
        }
<span class="nc" id="L171">        catch (Exception e) {</span>
<span class="nc" id="L172">            e.printStackTrace();</span>
<span class="nc" id="L173">        }</span>

<span class="nc" id="L175">        setVisible(true);</span>
<span class="nc" id="L176">    }</span>

    public void displayQuestion() {
        try {
<span class="nc" id="L180">            String question = resultSet.getString(&quot;Question&quot;);</span>
<span class="nc" id="L181">            correctAnswer = resultSet.getString(&quot;Answer&quot;);</span>
<span class="nc" id="L182">            String option1 = resultSet.getString(&quot;Option1&quot;);</span>
<span class="nc" id="L183">            String option2 = resultSet.getString(&quot;Option2&quot;);</span>
<span class="nc" id="L184">            String option3 = resultSet.getString(&quot;Option3&quot;);</span>

<span class="nc" id="L186">            questionLabel.setText(question);</span>
<span class="nc" id="L187">            option1Button.setText(option1);</span>
<span class="nc" id="L188">            option2Button.setText(option2);</span>
<span class="nc" id="L189">            option3Button.setText(option3);</span>
<span class="nc" id="L190">        } catch (Exception e) {</span>
<span class="nc" id="L191">            e.printStackTrace();</span>
<span class="nc" id="L192">        }</span>
<span class="nc" id="L193">    }</span>

    public void processAnswer() {
<span class="nc bnc" id="L196" title="All 4 branches missed.">        if (option1Button.isSelected() &amp;&amp; option1Button.getText().equals(correctAnswer)) {</span>
<span class="nc" id="L197">            score++;</span>
<span class="nc bnc" id="L198" title="All 4 branches missed.">        } else if (option2Button.isSelected() &amp;&amp; option2Button.getText().equals(correctAnswer)) {</span>
<span class="nc" id="L199">            score++;</span>
<span class="nc bnc" id="L200" title="All 4 branches missed.">        } else if (option3Button.isSelected() &amp;&amp; option3Button.getText().equals(correctAnswer)) {</span>
<span class="nc" id="L201">            score++;</span>
        }
<span class="nc" id="L203">        buttonGroup.clearSelection();</span>
<span class="nc" id="L204">    }</span>

    public void endQuiz(String email,String Lang) {
<span class="nc" id="L207">        JOptionPane.showMessageDialog(this, &quot;Quiz completed. Your final score is: &quot; + score);</span>
        try {
<span class="nc" id="L209">            UserScore userScore = new UserScore(email, name, score, Lang);</span>
<span class="nc" id="L210">            UserDAO.saveScore(userScore);</span>
<span class="nc" id="L211">            new View2(userScore);</span>


<span class="nc" id="L214">            resultSet.close();</span>
<span class="nc" id="L215">            connection.close();</span>
//            Quiz.dispose();
<span class="nc" id="L217">        } catch (Exception e) {</span>
<span class="nc" id="L218">            e.printStackTrace();</span>
<span class="nc" id="L219">        }</span>
<span class="nc" id="L220">        dispose();</span>
<span class="nc" id="L221">    }</span>
}

class QuizNameScreen extends JFrame implements ActionListener {
    public JTextField nameTextField;
    public JButton submitButton;
    public String lang;
    public String email;

<span class="nc" id="L230">    public QuizNameScreen(String lang, String email) {</span>
<span class="nc" id="L231">        this.lang = lang;</span>
<span class="nc" id="L232">        this.email = email;</span>

<span class="nc" id="L234">        setTitle(&quot;Quiz Name&quot;);</span>
<span class="nc" id="L235">        setLocationRelativeTo(null);</span>

<span class="nc" id="L237">        setSize(400, 150);</span>
<span class="nc" id="L238">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="nc" id="L239">        setLayout(new BorderLayout());</span>

<span class="nc" id="L241">        JPanel mainPanel = new JPanel();</span>
<span class="nc" id="L242">        mainPanel.setLayout(new GridLayout(2, 1));</span>

<span class="nc" id="L244">        JLabel nameLabel = new JLabel(&quot;Enter Name of the Quiz:&quot;);</span>
<span class="nc" id="L245">        nameTextField = new JTextField();</span>
<span class="nc" id="L246">        mainPanel.add(nameLabel);</span>
<span class="nc" id="L247">        mainPanel.add(nameTextField);</span>

<span class="nc" id="L249">        submitButton = new JButton(&quot;Submit&quot;);</span>
<span class="nc" id="L250">        submitButton.addActionListener(this);</span>

<span class="nc" id="L252">        add(mainPanel, BorderLayout.CENTER);</span>
<span class="nc" id="L253">        add(submitButton, BorderLayout.SOUTH);</span>

<span class="nc" id="L255">        setVisible(true);</span>
<span class="nc" id="L256">    }</span>

    @Override
    public void actionPerformed(ActionEvent e) {
<span class="nc bnc" id="L260" title="All 2 branches missed.">        if (e.getSource() == submitButton) {</span>
<span class="nc" id="L261">            String name = nameTextField.getText();</span>
            try {
<span class="nc bnc" id="L263" title="All 2 branches missed.">                if (isNameCorrect(name, lang, email)) {</span>
                    // Name is correct, continue to the quiz
<span class="nc" id="L265">                    dispose(); // Close the current screen</span>
<span class="nc" id="L266">                    new Quiz(lang, name,email); // Open the quiz screen</span>
                }
<span class="nc" id="L268">            } catch (SQLException ex) {</span>
<span class="nc" id="L269">                ex.printStackTrace();</span>
<span class="nc" id="L270">            }</span>
        }
<span class="nc" id="L272">    }</span>

    public static boolean isNameCorrect(String name, String lang, String email) throws SQLException {
<span class="nc bnc" id="L275" title="All 6 branches missed.">        if (name.isEmpty() || name.length() &gt;= 20 || !UserDAO.isName(email, lang, name)) {</span>
<span class="nc" id="L276">            JOptionPane.showMessageDialog(null, &quot;Invalid Name&quot;);</span>
<span class="nc" id="L277">            return false;</span>
        }
<span class="nc" id="L279">        JOptionPane.showMessageDialog(null, &quot;New name is: &quot; + name);</span>
<span class="nc" id="L280">        return true;</span>
    }

    public static void main(String[] args) {
<span class="nc" id="L284">        new QuizNameScreen(&quot;Java&quot;, &quot;kiranjeetkour144&quot;);</span>
<span class="nc" id="L285">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>